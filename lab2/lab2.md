# Лабораторная работа №2

## Часть 1

Даны такая сеть:

```
[LAN1] <--> [LAN2] <--> [LAN3] <--> [LAN4]
                          /\
                          ||
                          \/
                        [LAN5]
```

количество узлов в каждой сети и IPv4-адрес из сети с маской

Нужно вычислить диапазоны для каждой подсети

Для примера пусть возьмем такие данные:

| IP-адрес из сети, маска | Сеть 1 | Сеть 2 | Сеть 3 | Сеть 4 | Сеть 5 |
|-|-|-|-|-|-|
| `194.85.32.19`, `255.255.255.0` | 10 | 6 | 1 | 18 | 100 |

Применяя маску к IP-адресу, получаем адрес сети - `194.85.32.0`

В маске 8 нулей, значит в этой сети есть 256 свободных адресов (минус один под широковещание и адрес сети)

Теперь посчитаем количество узлов в подсетях. Учитываем, что маршрутизатор, подключенный к сети, добавляет адрес, а также еще один адрес для широковещания и сам адрес сети

Получаем:

| IP-адрес из сети, маска | Сеть 1 | Сеть 2 | Сеть 3 | Сеть 4 | Сеть 5 |
|-|-|-|-|-|-|
| `194.85.32.0/24` | 10 + 1 + 2 | 6 + 2 + 2 | 1 + 3 + 2 | 18 + 1 + 2 | 100 + 1 + 2 |
| | 13 | 10 | 5 | 21 | 103 |

Распределяем наш диапазон адресов подсетям, начинаем с самой большой подсети, округляя вверх число узлов в сети до ближайшей степени двойки:

* Подсети 5 достается `194.85.32.0` - `194.85.32.127` (`194.85.32.0/25`), 128 адресов
* Подсети 4 достается `194.85.32.128` - `194.85.32.159` (`194.85.32.128/27`), 32 адреса
* Подсети 1 достается `194.85.32.160` - `194.85.32.175` (`194.85.32.160/28`), 16 адресов
* Подсети 2 достается `194.85.32.176` - `194.85.32.191` (`194.85.32.176/28`), 16 адресов
* Подсети 3 достается `194.85.32.192` - `194.85.32.199` (`194.85.32.192/29`), 8 адресов

Первый адрес подсети в нулями на конце - адрес самой сети, а последний с единицами на конце - адрес широковещания, по ним маршрутизация до конкретного узла не производится

## Часть 2

Убедимся с помощью утилиты `ipcalc`:

```sh
ipcalc 194.85.32.0/25 | grep "Hosts"
ipcalc 194.85.32.128/27 | grep "Hosts"
ipcalc 194.85.32.160/28 | grep "Hosts"
ipcalc 194.85.32.176/28 | grep "Hosts"
ipcalc 194.85.32.192/29 | grep "Hosts"
```

Получаем:

```sh
Hosts/Net: 126                   Class C
Hosts/Net: 30                    Class C
Hosts/Net: 14                    Class C
Hosts/Net: 14                    Class C
Hosts/Net: 6                     Class C
```

Все значения не превышают количества узлов в подсетях, поэтому мы сделали все правильно

